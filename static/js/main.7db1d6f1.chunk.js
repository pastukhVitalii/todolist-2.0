(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{16:function(t,e,a){},29:function(t,e,a){t.exports=a(60)},34:function(t,e,a){},35:function(t,e,a){},59:function(t,e,a){},60:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),r=a(9),i=a.n(r),s=(a(34),a(2)),c=a(10),l=a(4),d=a(3),u=(a(16),a(1)),p=(a(35),function(t){var e=t.small?"small":"";return o.a.createElement("button",{className:"button + ".concat(t.type," + ").concat(e),onClick:function(e){return t.onClick()},disabled:t.disable}," ",t.btnName)}),f=(a(8),function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={editMode:!1,title:t.props.task.title},t.onIsDoneChanged=function(e){var a=e.currentTarget.checked?2:0;t.props.changeStatus(t.props.task.id,a)},t.onTitleChanged=function(e){t.setState({title:e.currentTarget.value})},t.activateEditMode=function(e){t.setState({editMode:!0})},t.deactivateEditMode=function(e){t.props.changeTitle(t.props.task.id,t.state.title),t.setState({editMode:!1})},t.onDeleteTask=function(){t.props.deleteTask(t.props.task.id)},t.onPriorityChange=function(e){t.props.changePriority(t.props.task.id,+e.currentTarget.value)},t.render=function(){var e=t.props.task.status?" done":"";switch(t.props.task.priority){case 0:"Low";break;case 1:"Middle";break;case 2:"High";break;case 3:"Urgently";break;case 4:"Later"}return o.a.createElement("div",{className:"todoList-task"},o.a.createElement("div",{className:e},o.a.createElement("input",{className:"checkBox",type:"checkbox",checked:2===t.props.task.status,onChange:t.onIsDoneChanged}),t.state.editMode?o.a.createElement("input",{onBlur:t.deactivateEditMode,onChange:t.onTitleChanged,autoFocus:!0,value:t.state.title}):o.a.createElement("span",{onClick:t.activateEditMode},t.props.task.title),", ",o.a.createElement("b",null,"priority:"),o.a.createElement("select",{className:"select",value:t.props.task.priority,onChange:t.onPriorityChange},o.a.createElement("option",{value:"2"},"High"),o.a.createElement("option",{value:"1"},"Middle"),o.a.createElement("option",{value:"0"},"Low"))),o.a.createElement(p,{type:"delete",onClick:t.onDeleteTask,btnName:"x"}))},t}return a}(o.a.Component)),m=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).render=function(){var e=t.props.tasks.map((function(e){return o.a.createElement(f,{task:e,changeStatus:t.props.changeStatus,changeTitle:t.props.changeTitle,changePriority:t.props.changePriority,key:e.id,deleteTask:t.props.deleteTask})}));return o.a.createElement("div",{className:"todoList-tasks"},t.props.loadingTasks?o.a.createElement("div",null,"Loading..."):e,0!==t.props.tasks.length||t.props.loadingTasks?o.a.createElement("span",null):o.a.createElement("div",null,"Hey create a new tasks"))},t}return a}(o.a.Component),T=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={isHidden:!1},t.onAllFilterClick=function(){t.props.changeFilter("All")},t.onCompletedFilterClick=function(){t.props.changeFilter("Completed")},t.onActiveFilterClick=function(){t.props.changeFilter("Active")},t.onShowFiltersClick=function(e){t.setState({isHidden:!0})},t.onHideFiltersClick=function(e){t.setState({isHidden:!1})},t.render=function(){var e="All"===t.props.filterValue?"filter-active":"",a="Completed"===t.props.filterValue?"filter-active":"",n="Active"===t.props.filterValue?"filter-active":"";return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"todoList-footer-btn"},!t.state.isHidden&&o.a.createElement(o.a.Fragment,null,o.a.createElement(p,{type:"primary + ".concat(e),small:!0,onClick:t.onAllFilterClick,btnName:"All"}),o.a.createElement(p,{type:"primary + ".concat(a),small:!0,onClick:t.onCompletedFilterClick,btnName:"Completed"}),o.a.createElement(p,{type:"primary + ".concat(n),small:!0,onClick:t.onActiveFilterClick,btnName:"Active"}))),o.a.createElement("div",{className:"todoList-footer-filter"},!t.state.isHidden&&o.a.createElement("span",{onClick:t.onShowFiltersClick},"Hide filter "),t.state.isHidden&&o.a.createElement("span",{onClick:t.onHideFiltersClick},"Show filter ")))},t}return a}(o.a.Component),h=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={editMode:!1,title:""},t.onDelete=function(){t.props.deleteTodolist(t.props.todolistId)},t.activateEditMode=function(){t.setState({editMode:!0})},t.deactivateEditMode=function(){t.setState({editMode:!1}),t.props.updateTodolist(t.state.title)},t.onTitleChanged=function(e){t.setState({title:e.currentTarget.value})},t.render=function(){return o.a.createElement("div",{className:"todoList-header"},o.a.createElement("span",{className:"todoList-header-title"},t.state.editMode?o.a.createElement("input",{onBlur:t.deactivateEditMode,onChange:t.onTitleChanged,autoFocus:!0,defaultValue:t.props.title}):o.a.createElement("span",{onClick:t.activateEditMode},t.props.title)),o.a.createElement(p,{type:"primary",small:!0,onClick:t.onDelete,btnName:t.props.name}))},t}return a}(o.a.Component),g=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={error:!1,title:""},t.onAddItemClick=function(){var e=t.state.title;""===e.trim()?t.setState({error:!0}):(t.props.addItem(e),t.setState({error:!1,title:""}))},t.onTitleChanged=function(e){t.setState({error:!1,title:e.currentTarget.value})},t.onKeyPress=function(e){"Enter"===e.key&&t.onAddItemClick()},t.render=function(){var e=t.state.error?"error":"";return o.a.createElement("div",{className:"item-form"},o.a.createElement("input",{type:"text",placeholder:t.props.placeholder,className:"".concat(e," + input-form"),onChange:t.onTitleChanged,onKeyPress:t.onKeyPress,value:t.state.title}),o.a.createElement(p,{type:"primary",small:!0,onClick:t.onAddItemClick,btnName:t.props.btnName}))},t}return a}(o.a.Component),k=a(7),v=a(14),b=a(26),C=a.n(b).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1",withCredentials:!0,headers:{"API-KEY":"eec707e4-21e7-4972-ae6a-c9f0a894d660"}}),O=function(t){return C.post("todo-lists",{title:t}).then((function(t){return t.data}))},E=function(t,e){return C.put("/todo-lists/".concat(e,"/"),{title:t}).then((function(t){return t.data}))},y=function(){return C.get("todo-lists").then((function(t){return t.data}))},j=function(t){return C.get("/todo-lists/".concat(t,"/tasks")).then((function(t){return t.data}))},A=function(t){return C.delete("/todo-lists/".concat(t)).then((function(t){return t.data}))},S=function(t,e){return C.post("/todo-lists/".concat(e,"/tasks"),{title:t})},L=function(t,e,a){return C.put("/todo-lists/".concat(e,"/tasks/").concat(t),a)},I=function(t,e){return C.delete("/todo-lists/".concat(e,"/tasks/").concat(t))},w=function(){return C.get("/auth/me")},N=function(t,e){return C.post("/auth/login",{email:t,password:e})},D=function(){return C.delete("auth/login")},F="TodoApp/TodoList/CREATE_TODOLIST",M="TodoApp/TodoList/ADD_TASK",P="TodoApp/TodoList/UPDATE_TASK",_="TodoApp/TodoList/DELETE_TODOLIST",H="TodoApp/TodoList/DELETE_TASK",R="TodoList/Reducer/SET_TODOLIST",U="TodoList/Reducer/SET_TASKS",K="TodoList/Reducer/LOADING_TODO",V="TodoList/Reducer/LOADING_TASKS",x="TodoList/Reducer/SET_USER_DATA",B="TodoList/Reducer/LOGIN_SUCCESS",G="TodoList/Reducer/LOGOUT_SUCCESS",W={todolists:[],loadingTodo:!1,loadingTasks:!1,userId:"",email:"",login:"",isAuth:!1},z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case R:return Object(u.a)(Object(u.a)({},t),{},{todolists:e.todolists});case F:return Object(u.a)(Object(u.a)({},t),{},{todolists:[e.newTodolist].concat(Object(v.a)(t.todolists))});case"TodoList/Reducer/UPDATE_TITLE_TODOLIST":return Object(u.a)(Object(u.a)({},t),{},{todolists:t.todolists.map((function(t){return t.id!==e.todolistId?t:Object(u.a)(Object(u.a)({},t),{},{title:e.title})}))});case U:return Object(u.a)(Object(u.a)({},t),{},{todolists:t.todolists.map((function(t){return t.id!==e.todolistId?t:Object(u.a)(Object(u.a)({},t),{},{tasks:e.tasks})}))});case M:return Object(u.a)(Object(u.a)({},t),{},{todolists:t.todolists.map((function(t){return t.id===e.todolistId?Object(u.a)(Object(u.a)({},t),{},{tasks:[].concat(Object(v.a)(t.tasks),[e.newTask])}):t}))});case P:return Object(u.a)(Object(u.a)({},t),{},{todolists:t.todolists.map((function(t){return t.id===e.todolistId?Object(u.a)(Object(u.a)({},t),{},{tasks:t.tasks.map((function(t){return t.id!==e.taskId?t:Object(u.a)(Object(u.a)({},t),e.obj)}))}):t}))});case _:return Object(u.a)(Object(u.a)({},t),{},{todolists:t.todolists.filter((function(t){return t.id!==e.todolistId}))});case H:return Object(u.a)(Object(u.a)({},t),{},{todolists:t.todolists.map((function(t){return t.id===e.todolistId?Object(u.a)(Object(u.a)({},t),{},{tasks:t.tasks.filter((function(t){return t.id!==e.taskId}))}):t}))});case K:return Object(u.a)(Object(u.a)({},t),{},{loadingTodo:e.isActive});case V:return Object(u.a)(Object(u.a)({},t),{},{loadingTasks:e.isActive});case x:return Object(u.a)(Object(u.a)({},t),{},{login:e.login,isAuth:!0});case B:return Object(u.a)(Object(u.a)({},t),{},{isAuth:!0});case G:return Object(u.a)(Object(u.a)({},t),{},{isAuth:!1})}return t},J=function(t){return{type:K,isActive:t}},q=function(t){return{type:V,isActive:t}},Y=function(){return function(t){t(J(!0)),y().then((function(e){t({type:R,todolists:e}),t(J(!1))}))}},$=function(){return function(t){return w().then((function(e){if(0===e.data.resultCode){var a=e.data.data,n=a.id,o=a.login,r=a.email;t(function(t,e,a){return{type:x,userId:t,login:e,email:a}}(n,o,r))}}))}},Q=function(t,e){return function(a){return N(t,e).then((function(t){0===t.data.resultCode&&(a({type:B}),a($()),a(Y()))})).catch(Error)}},X=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={filterValue:"All"},t.deleteTodolist=function(){t.props.deleteTodolistTC(t.props.id)},t.updateTodolist=function(e){t.props.updateTodolistTC(e,t.props.id)},t.addTask=function(e){t.props.addTaskTC(e,t.props.id)},t.changeFilter=function(e){t.setState({filterValue:e})},t.changeTask=function(e,a){var n=t.props.tasks.find((function(t){return t.id===e}));if(n){var o=Object(u.a)(Object(u.a)({},n),a);t.props.updateTaskTC(e,t.props.id,o)}},t.changeStatus=function(e,a){t.changeTask(e,{status:a})},t.changeTitle=function(e,a){t.changeTask(e,{title:a})},t.changePriority=function(e,a){t.changeTask(e,{priority:a})},t.deleteTask=function(e){t.props.deleteTaskTC(e,t.props.id)},t.render=function(){var e=t.props.tasks,a=(void 0===e?[]:e).filter((function(e){switch(t.state.filterValue){case"Active":return 2!==e.status;case"Completed":return 2===e.status;default:return!0}}));return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"todoList"},o.a.createElement(h,{name:"Delete",title:t.props.title,todolistId:t.props.id,deleteTodolist:t.deleteTodolist,updateTodolist:t.updateTodolist}),o.a.createElement(g,{addItem:t.addTask,placeholder:"Create task",btnName:"Create"}),o.a.createElement(m,{changeStatus:t.changeStatus,changeTitle:t.changeTitle,changePriority:t.changePriority,tasks:a,deleteTask:t.deleteTask,loadingTasks:t.props.loadingTasks}),o.a.createElement(T,{filterValue:t.state.filterValue,changeFilter:t.changeFilter})))},t}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.setTaskTC(this.props.id)}}]),a}(o.a.Component),Z=Object(k.b)(null,{setTaskTC:function(t){return function(e){e(q(!0)),j(t).then((function(a){e(function(t,e){return{type:U,tasks:t,todolistId:e}}(a.items,t)),e(q(!1))}))}},signInTC:Q,deleteTodolistTC:function(t){return function(e){A(t).then((function(a){e(function(t){return{type:_,todolistId:t}}(t))}))}},updateTodolistTC:function(t,e){return function(a){E(t,e).then((function(n){0===n.resultCode&&a(function(t,e){return{type:"TodoList/Reducer/UPDATE_TITLE_TODOLIST",title:t,todolistId:e}}(t,e))}))}},addTaskTC:function(t,e){return function(a){S(t,e).then((function(t){a(function(t,e){return{type:M,newTask:t,todolistId:e}}(t.data.data.item,e))}))}},updateTaskTC:function(t,e,a){return function(n){L(t,e,a).then((function(o){n(function(t,e,a){return{type:P,taskId:t,todolistId:e,obj:a}}(t,e,a))}))}},deleteTaskTC:function(t,e){return function(a){I(t,e).then((function(n){a(function(t,e){return{type:H,taskId:t,todolistId:e}}(t,e))}))}}})(X),tt=(a(59),function(t){var e=t.error?"error":"";return o.a.createElement("div",{className:"input"},o.a.createElement("input",{type:"text",placeholder:t.placeholder,className:"".concat(t.type," + ").concat(e),value:t.value,onChange:function(e){return t.onChange(e)},autoFocus:!0}))}),et=function(t){Object(l.a)(a,t);var e=Object(d.a)(a);function a(){var t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))).state={email:"",password:"",error:!1},t.addTodoList=function(e){t.props.addTodolistTC(e)},t.restoreState=function(){t.props.setTodolistsTC()},t.setLogin=function(e){t.setState({email:e.currentTarget.value})},t.setPassword=function(e){t.setState({password:e.currentTarget.value})},t.signIn=function(){""===t.state.email.trim()?t.setState({error:!0}):t.props.signInTC(t.state.email,t.state.password)},t.signOut=function(){t.props.signOutTC()},t.render=function(){var e=t.props.todolists.map((function(e){return o.a.createElement(Z,{key:e.id,id:e.id,title:e.title,tasks:e.tasks,loadingTasks:t.props.loadingTasks})}));return o.a.createElement("div",null,o.a.createElement(o.a.Fragment,null,o.a.createElement(g,{addItem:t.addTodoList,placeholder:"Create a new task list",btnName:"Create"})),o.a.createElement("div",{className:"authorization"},t.props.isAuth?t.props.login:o.a.createElement("div",{className:"authorizationForm"},o.a.createElement("div",{className:"authFree"},"Hey!! For testing please use this email pastukh.v.7@gmail.com and this password SNSqwerty07"),o.a.createElement(tt,{value:t.state.email,placeholder:"Login",onChange:t.setLogin,error:t.state.error}),o.a.createElement(tt,{value:t.state.password,placeholder:"Password",onChange:t.setPassword,error:t.state.error}),o.a.createElement(p,{btnName:"sign in",type:"primary",onClick:t.signIn})),t.props.isAuth?o.a.createElement(p,{btnName:"Logout",type:"primary",onClick:t.signOut,small:!0}):""),o.a.createElement("div",{className:"App"},t.props.loadingTodo?o.a.createElement("span",null,"Loading..."):e))},t}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.restoreState(),this.props.setAuthUserDataTC()}}]),a}(o.a.Component),at=Object(k.b)((function(t){return{todolists:t.todolist.todolists,loadingTodo:t.todolist.loadingTodo,loadingTasks:t.todolist.loadingTasks,login:t.todolist.login,isAuth:t.todolist.isAuth}}),{setTodolistsTC:Y,addTodolistTC:function(t){return function(e){O(t).then((function(t){var a=t.data.item;e(function(t){return{type:F,newTodolist:t}}(a))}))}},setAuthUserDataTC:$,signInTC:Q,signOutTC:function(){return function(t){return D().then((function(e){0===e.data.resultCode&&t({type:G})}))}}})(et);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var nt=a(6),ot=a(27),rt=a(28),it=Object(nt.combineReducers)({todolist:z}),st=Object(nt.createStore)(it,Object(rt.composeWithDevTools)(Object(nt.applyMiddleware)(ot.a)));i.a.render(o.a.createElement(k.a,{store:st},o.a.createElement(at,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},8:function(t,e,a){}},[[29,1,2]]]);
//# sourceMappingURL=main.7db1d6f1.chunk.js.map